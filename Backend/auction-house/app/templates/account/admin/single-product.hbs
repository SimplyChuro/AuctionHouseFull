<div class="container-fluid current-route-background bottom-margin-50">
  <div class="container">
    <p class="form-title-text">ADMIN<span class="current-route-text"><span class="current-route-parent-text">ADMIN /</span>   SINGLE PRODUCT</span></p>
  </div>
</div>

<div class="container-fluid pt-4">
  <div class="container">
    <div class="row fade">
      <div class="col-sm-0 col-md-0 col-lg-2"></div>
      <div class="col-lg-8">
        <div class="card margin-card">
          <h1 class="card-title">PRODUCT INFO</h1>
          <div class="card-body mr-4 ml-4">
            <form autocomplete="off" method="POST">
              <div class="form-group mt-4 mb-0 pb-0">
                <label class="sale-item-label-text">What do you sell?</label>
                {{input type="text" value=nameInput class="form-control form-background-color p-4 mb-0"}}
              </div>
              {{#if productNameHasError}}
                <div class="validation-error-message mt-1 fade">
                  {{productNameErrorMessage}}
                </div>
              {{/if}}
              
              <div class="row p-0 m-0 mt-5 mb-5 full-width">
                <div class="sale-item-category-holder">
                  <div class="mr-2">
                    <select onchange={{action "setCategory" value="target.value"}} class="sale-item-select">
                      <option disabled selected> Select Category </option>

                      {{#each model.categoryList as |cat|}}
                        {{#if (eq cat.parent_id null)}}
                          {{#if (eq cat.id (get-product-category model.product 'parent'))}}
                            <option value={{cat.id}} selected>
                              {{cat.name}}
                            </option>
                          {{else}}
                            <option value={{cat.id}}>
                              {{cat.name}}
                            </option>
                          {{/if}}
                        {{/if}}
                      {{/each}}
                    </select>
                  </div>
                  {{#if categoryHasError}}
                    <div class="validation-error-message mt-1 fade">
                      {{categoryErrorMessage}}
                    </div>
                  {{/if}}
                </div>
                <div class="sale-item-category-holder">
                  <select onchange={{action "setSubCategory" value="target.value"}} class="sale-item-select">
                    <option value='null' selected> Select SubCategory </option>
                      {{#if (eq category null)}}
                        {{#each model.categoryList as |cat|}}
                          {{#if (eq (get-product-category model.product 'parent') cat.parent_id)}}
                            {{#if (eq cat.id (get-product-category model.product))}}
                              <option value={{cat.id}} selected>
                                {{cat.name}}
                              </option>
                            {{else}}
                              <option value={{cat.id}}>
                                {{cat.name}}
                              </option>
                            {{/if}}
                          {{/if}}
                        {{/each}}
                      {{else}}
                        {{#each model.categoryList as |cat|}}
                          {{#if (eq category cat.parent_id)}}
                            <option value={{cat.id}}>
                              {{cat.name}}
                            </option>
                          {{/if}}
                        {{/each}}
                      {{/if}}
                  </select>
                  {{#if subCategoryHasError}}
                    <div class="validation-error-message mt-1 fade">
                      {{subCategoryErrorMessage}}
                    </div>
                  {{/if}}
                </div>
              </div>
              <div class="full-width">
                <label class="mb-1 sale-item-label-text">Description</label>
                {{textarea rows="4" cols="50" value=descriptionInput class="full-width sale-item-description-text-area pt-2 pr-3 pb-2 pl-3"}}
                {{#if descriptionHasError}}
                  <div class="validation-error-message mt-1 fade">
                    {{descriptionErrorMessage}}
                  </div>
                {{/if}}
              </div>
              <div class="form-group mt-4 mb-0">
                <label class="sale-item-label-text">Color</label>
                {{input type="text" value=colorInput class="form-control form-background-color mb-0 p-4"}}
              </div>
              {{#if colorHasError}}
                <div class="validation-error-message mt-1 fade">
                  {{colorErrorMessage}}
                </div>
              {{/if}}
              <div class="form-group mt-4 mb-0">
                <label class="sale-item-label-text">Size</label>
                {{input type="text" value=sizeInput class="form-control form-background-color mb-0 p-4"}}
              </div>
              {{#if sizeHasError}}
                <div class="validation-error-message mt-1 fade">
                  {{sizeErrorMessage}}
                </div>
              {{/if}}
              <div class="form-group mt-4 mb-0">
                <label class="sale-item-label-text">Your starting price</label>
                {{input type="text" value=startingPriceInput class="form-control form-background-color mb-0 p-4"}}
              </div>
              {{#if startingPriceHasError}}
                <div class="validation-error-message mt-1 fade">
                  {{startingPriceErrorMessage}}
                </div>
              {{/if}}
              <div class="row p-0 m-0 mt-5 mb-1 full-width">
                <div class="sale-item-category-holder">
                  <div class="mr-2">
                    <label class="mb-1 sale-item-label-text">Start date</label>
                    {{bootstrap-datepicker changeDate="changeStartDate" value=startDateInput placeholder=currentDate todayHighlight=true format="dd/mm/yyyy" autoclose=true class="account-profile-input-form-half-static account-profile-form-text account-profile-pointer"}}
                  </div>
                  {{#if publishDateHasError}}
                    <div class="validation-error-message mt-1 fade">
                      {{publishDateErrorMessage}}
                    </div>
                  {{/if}}
                </div>
                <div class="sale-item-category-holder mb-2">
                  <label class="mb-1 sale-item-label-text">End date</label>
                  {{bootstrap-datepicker changeDate="changeEndDate" value=endDateInput placeholder="14/04/2025" todayHighlight=true format="dd/mm/yyyy" autoclose=true startDate=(get-start-date startDate) class="account-profile-input-form-half-static account-profile-form-text account-profile-pointer"}}
                  {{#if expiryDateHasError}}
                    <div class="validation-error-message mt-1 fade">
                      {{expiryDateErrorMessage}}
                    </div>
                  {{/if}}
                </div>
              </div>
              <div class="mt-4 ml-1">
                {{input type="checkbox" checked=isFeatured}}
                <span class="mb-1 sale-item-label-text">Featured</span>
              </div>
              <div class="mt-5 bottom-margin-150">
                <button class="sale-item-done-button" {{action 'saveProduct'}}>
                  UPDATE
                </button>
                <button class="sale-item-done-button mr-2" {{action 'deleteProduct'}}>
                  DELETE
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>